<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>鬼滅語詞修煉遊戲</title>
    <style>
        :root { --primary: #2c3e50; --accent: #e74c3c; --bg: #f4f4f4; }
        body { margin: 0; height: 100dvh; display: flex; flex-direction: column; font-family: 'PingFang TC', sans-serif; background: var(--bg); }
        #story-box { flex: 1; overflow-y: auto; padding: 20px; line-height: 1.8; font-size: 1.2rem; background: white; border-bottom: 2px solid #ddd; }
        .drop-zone { border-bottom: 2px solid red; display: inline-block; min-width: 80px; text-align: center; color: var(--accent); font-weight: bold; cursor: pointer; margin: 0 4px; padding-bottom: 0px; vertical-align: bottom; line-height: 1.2; }
        .drop-zone.correct { color: green; border-bottom-color: green; }
        .drop-zone.wrong { color: red; text-decoration: line-through; }
        #ui-container { max-height: 35vh; overflow-y: auto; padding: 10px; background: #eee; }
        .word-bank { display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; margin-bottom: 10px; }
        .word-card { background: white; padding: 4px 8px; border-radius: 4px; border: 1px solid #ccc; font-size: 0.95rem; cursor: pointer; user-select: none; }
        .word-card:active { background: #ddd; }
        #controls { display: flex; gap: 10px; justify-content: center; padding-bottom: 10px; }
        button { padding: 10px 20px; font-size: 1rem; cursor: pointer; background: var(--primary); color: white; border: none; border-radius: 5px; }
    </style>
</head>
<body>

<div id="story-box">
    在狹霧山深處，炭治郎正接受著嚴苛的修煉。教導他的除了鱗瀧老師，還有一位臉上佈滿戰鬥<span class="drop-zone" data-ans="疤痕"></span>的老前輩，孩子們都稱呼他為<span class="drop-zone" data-ans="達駭"></span>。這位前輩平日沉默寡言，最喜歡做的事就是在林間空地升起<span class="drop-zone" data-ans="營火"></span>，看著跳動的火光陷入沉思。炭治郎對這位經歷過無數生死關頭的獵鬼人充滿了<span class="drop-zone" data-ans="崇拜"></span>，總希望能從他身上學到呼吸法的精髓。<br><br>
    這一天，山區的天氣陰晴不定，午後突然下起了<span class="drop-zone" data-ans="傾盆"></span>大雨，雷聲混雜著某種不知名怪物的低沉<span class="drop-zone" data-ans="吼聲"></span>，從山谷另一頭傳來。炭治郎感覺到一股不尋常的氣息，他在路邊草叢中發現了一個被<span class="drop-zone" data-ans="棄置"></span>已久的生鏽<span class="drop-zone" data-ans="鐵罐"></span>，裡面竟然縮著一隻全身是傷、<span class="drop-zone" data-ans="奄奄一息"></span>的鎹鴉。<br><br>
    「別擔心，我會救你的。」炭治郎<span class="drop-zone" data-ans="小心翼翼"></span>地將鎹鴉捧在掌心，深怕一個動作太大就傷了它。由於雨勢太大，視線模糊，他決定<span class="drop-zone" data-ans="碰運氣"></span>往山頂的石洞跑去，希望能找到避雨的地方。一路上，他的心跳聲<span class="drop-zone" data-ans="咚咚"></span>作響，在寂靜的林間顯得格外清晰。他不斷揉著因過度緊張而乾澀的<span class="drop-zone" data-ans="喉嚨"></span>，試圖穩定呼吸。抵達石洞後，他閉上眼虔誠地為這條生命<span class="drop-zone" data-ans="祈禱"></span>，希望醫務室的夥伴能及時趕到。
</div>

<div id="ui-container">
    <div class="word-bank" id="bank"></div>
    <div id="controls">
        <button onclick="checkResults()">檢查任務結果</button>
        <button onclick="resetGame()" style="background:#7f8c8d;">重置</button>
    </div>
</div>

<script>
    const words = ["達駭", "疤痕", "鐵罐", "咚咚", "碰運氣", "傾盆", "營火", "崇拜", "棄置", "奄奄一息", "小心翼翼", "祈禱", "吼聲", "喉嚨"].sort(() => Math.random() - 0.5);
    const bank = document.getElementById('bank');
    let selectedZone = null;

    function init() {
        bank.innerHTML = words.map(w => `<div class="word-card" onclick="fillWord('${w}')">${w}</div>`).join('');
        document.querySelectorAll('.drop-zone').forEach(zone => {
            zone.onclick = () => { selectedZone = zone; zone.innerText = ''; zone.className = 'drop-zone'; };
        });
    }

    function fillWord(w) {
        const emptyZone = Array.from(document.querySelectorAll('.drop-zone')).find(z => z.innerText === '');
        if (emptyZone) emptyZone.innerText = w;
    }

    function checkResults() {
        const zones = document.querySelectorAll('.drop-zone');
        let correctCount = 0;
        zones.forEach(z => {
            if (z.innerText.trim() === z.dataset.ans) {
                z.className = 'drop-zone correct';
                correctCount++;
            } else {
                z.className = 'drop-zone wrong';
            }
        });
        if (correctCount === zones.length) alert("全對！修煉完成！");
        else alert("還有錯誤，再接再厲！");
    }

    function resetGame() { location.reload(); }
    init();
</script>
</body>
</html>